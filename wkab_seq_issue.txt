--2147799019
DROP SEQUENCE WKAB10.SEQ_REPORT_USER
/
CREATE SEQUENCE WKAB10.SEQ_REPORT_USER
    START WITH 1
    INCREMENT BY 24
    NOMINVALUE
    NOMAXVALUE
    NOCYCLE
    CACHE 20
    NOORDER
/
GRANT SELECT ON WKAB10.SEQ_REPORT_USER TO DPPRD01_LNK_USER
/
GRANT ALTER ON WKAB10.SEQ_REPORT_USER TO BENENG
/
GRANT SELECT ON WKAB10.SEQ_REPORT_USER TO BENENG
/
GRANT SELECT ON WKAB10.SEQ_REPORT_USER TO IVR
/


Select wkab10.seq_report_user.nextval from dual 

T_WCP_REPORT_USER


*************

CREATE TABLE WKAB10.O_WCP_REPORT_USER
(
    REPORT_USER_KEY NUMBER            NULL,
    USER_LOGON      VARCHAR2(20)      NULL,
    COMPANY_ID      NUMBER            NULL,
    COMPANY_NAME    VARCHAR2(100)     NULL,
    FIRST_NAME      VARCHAR2(40)      NULL,
    LAST_NAME       VARCHAR2(40)      NULL,
    CREATED         DATE          DEFAULT sysdate     NULL,
    CONSTRAINT PK_T_WCP_REPORT_USER
    PRIMARY KEY (REPORT_USER_KEY)
        USING INDEX TABLESPACE WKAB_INDEX
                    PCTFREE 10
                    INITRANS 2
                    MAXTRANS 255
                    STORAGE(BUFFER_POOL DEFAULT)
    ENABLE
    NOVALIDATE
)
ORGANIZATION HEAP
TABLESPACE WKAB_DATA
LOGGING
PCTFREE 10
PCTUSED 0
INITRANS 1
MAXTRANS 255
STORAGE(BUFFER_POOL DEFAULT)
NOPARALLEL
NOCACHE
NOROWDEPENDENCIES
NO INMEMORY
/
ALTER TABLE WKAB10.T_DYNAMIC_REPORT
    ADD CONSTRAINT FK_REPORT_USER_KEY
    FOREIGN KEY (REPORT_USER_KEY)
    REFERENCES WKAB10.O_WCP_REPORT_USER (REPORT_USER_KEY)
    ENABLE
    NOVALIDATE
/
GRANT SELECT ON WKAB10.O_WCP_REPORT_USER TO APP_READ_ONLY_NOAETNA_ROLE
/
GRANT DELETE ON WKAB10.O_WCP_REPORT_USER TO APP_READ_WRITE_ALL_DATA_ROLE
/
GRANT INSERT ON WKAB10.O_WCP_REPORT_USER TO APP_READ_WRITE_ALL_DATA_ROLE
/
GRANT SELECT ON WKAB10.O_WCP_REPORT_USER TO APP_READ_WRITE_ALL_DATA_ROLE
/
GRANT UPDATE ON WKAB10.O_WCP_REPORT_USER TO APP_READ_WRITE_ALL_DATA_ROLE
/
GRANT DELETE ON WKAB10.O_WCP_REPORT_USER TO APP_READ_WRITE_NOAETNA_ROLE
/
GRANT INSERT ON WKAB10.O_WCP_REPORT_USER TO APP_READ_WRITE_NOAETNA_ROLE
/
GRANT SELECT ON WKAB10.O_WCP_REPORT_USER TO APP_READ_WRITE_NOAETNA_ROLE
/
GRANT UPDATE ON WKAB10.O_WCP_REPORT_USER TO APP_READ_WRITE_NOAETNA_ROLE
/
GRANT ALTER ON WKAB10.O_WCP_REPORT_USER TO BENENG
/
GRANT DEBUG ON WKAB10.O_WCP_REPORT_USER TO BENENG
/
GRANT DELETE ON WKAB10.O_WCP_REPORT_USER TO BENENG
/
GRANT FLASHBACK ON WKAB10.O_WCP_REPORT_USER TO BENENG
/
GRANT INDEX ON WKAB10.O_WCP_REPORT_USER TO BENENG
/
GRANT INSERT ON WKAB10.O_WCP_REPORT_USER TO BENENG
/
GRANT ON COMMIT REFRESH ON WKAB10.O_WCP_REPORT_USER TO BENENG
/
GRANT QUERY REWRITE ON WKAB10.O_WCP_REPORT_USER TO BENENG
/
GRANT REFERENCES ON WKAB10.O_WCP_REPORT_USER TO BENENG
/
GRANT SELECT ON WKAB10.O_WCP_REPORT_USER TO BENENG
/
GRANT UPDATE ON WKAB10.O_WCP_REPORT_USER TO BENENG
/
GRANT DELETE ON WKAB10.O_WCP_REPORT_USER TO DPPRD01_LNK_USER
/
GRANT INSERT ON WKAB10.O_WCP_REPORT_USER TO DPPRD01_LNK_USER
/
GRANT SELECT ON WKAB10.O_WCP_REPORT_USER TO DPPRD01_LNK_USER
/
GRANT UPDATE ON WKAB10.O_WCP_REPORT_USER TO DPPRD01_LNK_USER
/
GRANT DELETE ON WKAB10.O_WCP_REPORT_USER TO IVR
/
GRANT INSERT ON WKAB10.O_WCP_REPORT_USER TO IVR
/
GRANT SELECT ON WKAB10.O_WCP_REPORT_USER TO IVR
/
GRANT UPDATE ON WKAB10.O_WCP_REPORT_USER TO IVR
/


1. Save the table first
expdp system/n4hU95Klkql#zNI DIRECTORY=DATA_PUMP_DIR DUMPFILE=O_WCP_REPORT_USER.dmp  TABLES=WKAB10.O_WCP_REPORT_USER

2. Disable FK so we could truncate parent table
ALTER TABLE WKAB10.T_DYNAMIC_REPORT MODIFY CONSTRAINT FK_REPORT_USER_KEY DISABLE

/

3. Truncate table
TRUNCATE TABLE WKAB10.O_WCP_REPORT_USER;

4. Rebuild index start with 1
DROP SEQUENCE WKAB10.SEQ_REPORT_USER
/
CREATE SEQUENCE WKAB10.SEQ_REPORT_USER
    START WITH 1
    INCREMENT BY 24
    NOMINVALUE
    NOMAXVALUE
    NOCYCLE
    CACHE 20
    NOORDER
/
GRANT SELECT ON WKAB10.SEQ_REPORT_USER TO DPPRD01_LNK_USER
/
GRANT ALTER ON WKAB10.SEQ_REPORT_USER TO BENENG
/
GRANT SELECT ON WKAB10.SEQ_REPORT_USER TO BENENG
/
GRANT SELECT ON WKAB10.SEQ_REPORT_USER TO IVR
/