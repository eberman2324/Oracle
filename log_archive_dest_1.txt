#50 * * * * /orahome/u01/app/oracle/local/scripts/backup_archive_logs.sh HEDWSTS > /dev/null 2>&1


./backup_archive_logs.sh HEDWSTS


ps -ef |grep -i rman

kill -9 17432




ALTER SYSTEM SET log_archive_dest_1='location=+FLASH_01';

ALTER SYSTEM SET log_archive_dest_1='location=+DATA_01'; 


rm -f thread_1_seq_*
 
rm -f thread_1_seq_533*


select 'alter system kill session ''' || sid ||  ',' ||serial#|| ''';' from v$session where sid = '328';





***********HEDWDEV3************

FLASH_01 run out of space. Rman backup failed prior to that for some reason and second Backup run was too late from OEM

Could not do rman connect target / (was hung)

!! make sure you have space on DATA_01

. oraenv +ASM
sqlplus / as sysdba
@showasm...

. oraenv HEDWDEV3
sqlplus / as sysdba
ALTER SYSTEM SET log_archive_dest_1='location=+DATA_01';


alter system switch logfile;
exit


cd /orahome/u01/app/oracle/local/scripts/
./backup_archive_logs.sh HEDWDEV3






ALTER SYSTEM SET log_archive_dest_1='location=+FLASH_01';

Go to OEM and run regular Archivelog job it should delete files from +DATA_01


********************

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
log_archive_dest_1                   string      LOCATION=/oraarchivelog/pihmsu002/DSNTX001 VALID_FOR=(ALL_LOGFILES,ALL_ROLES) DB_UNIQUE_NAME=DSNTX001
                                                 
                                                 
ALTER SYSTEM SET log_archive_dest_1='LOCATION=/oraarchivelog/pihmsu002/DSNTX001 VALID_FOR=(ALL_LOGFILES,ALL_ROLES) DB_UNIQUE_NAME=DSNTX001';

alter system switch logfile;
 
connect catalog DSNTX001/DSNTX001namr@RCATPROD
#25 6-18 * * * /orahome/allu01/aetna/scripts/backup/rman_general_purpose.ksh DSNTX001 RCATPROD archivelog_backup_tape.rman


run
{
  backup archivelog all delete input;
    
    
}
RMAN-08137: WARNING: archived log not deleted, needed for standby or upstream capture process



log_archive_dest_2                   string      service="dntmg02l", LGWR ASYNC
                                                  NOAFFIRM delay=0 OPTIONAL com
                                                 pression=DISABLE max_failure=0
                                                  max_connections=1 reopen=30 n
                                                 et_timeout=30 db_unique_name="
                                                 dntmg02l" valid_for=(online_lo
                                                 gfile,primary_role)

log_archive_dest_state_






select     SID,
            SERIAL#,
            OPNAME,
            START_TIME,
            TOTALWORK,
            sofar,
            ROUND((sofar/totalwork) * 100,2) pct_done,
            sysdate + TIME_REMAINING/3600/24 end_time
from   v$session_longops
where  totalwork > sofar
and    opname  LIKE '%aggregate%'
and    opname like 'RMAN%';

******** Actifio *****
APRPYMSK

SQL> show parameter db_recovery_file_dest

NAME                                 TYPE
------------------------------------ -------------------
VALUE
------------------------------
db_recovery_file_dest                string
+ACTHEP_ILCPSKLRYV
db_recovery_file_dest_size           big integer
3000G


ASMCMD> pwd
+ACTHEP_ILCPSKLRYV/APRPYMSK_XHEPYDBW22Q/ARCHIVELOG
ASMCMD> ls
2021_06_10/
2021_06_11/
2021_06_12/
2021_06_13/
2021_06_14/
2021_06_15/
2021_06_16/
2021_06_17/
2021_06_18/
2021_06_19/
2021_06_20/
2021_06_21/
2021_06_22/
2021_06_23/
2021_06_24/
2021_06_25/
2021_06_26/
2021_06_27/
2021_06_28/
2021_06_29/
2021_06_30/
2021_07_01/
2021_07_02/
2021_07_03/
2021_07_04/
2021_07_05/
2021_07_06/
2021_07_07/
2021_07_08/
2021_07_09/



*************** How to change from ASM to local file system


show parameter log_archive_dest_1

location=+FLASH_01



alter system set log_archive_dest_1='location=/oraexport/u02/HEDWSTS/ARCH';

ALTER SYSTEM SET log_archive_dest_1='location=+FLASH_01';


****** How to manually cleanup archive logs from Primary *****

rmanc

backup archivelog all delete input;

-- if needed

srvctl stop database -d HEMPMGR2_xmedmdbw26d

srvctl start database -d HEMPMGR2_xmedmdbw26d


***** How to manually cleanup archive logs from Standby *******


So â€¦. Doing this manually just to get thing going again â€¦ ðŸ˜‰ 

For some reason (need to investigate later) HECVPR_STDBY1_ARCHIVE_LOG_PURGE was suspended in OEM

xhecvdbw21p.aetna.com (oracle) HECVPRD::/orahome/u01/app/oracle/local/scripts
HECVPRD>

xhecvdbw21p.aetna.com (oracle) HECVPRD::/orahome/u01/app/oracle/local/scripts
HECVPRD> ./purge_stby_archive_logs.sh HECVPRD
