CONFIGURE CHANNEL DEVICE TYPE 'SBT_TAPE' PARMS  'ENV=(TDPO_OPTFILE=/u01/app/oracle/tdpoopt/tdpo.DPPRD01.opt)';




RMAN configuration parameters for database with db_unique_name DPPRD01 are:
CONFIGURE RETENTION POLICY TO REDUNDANCY 31;
CONFIGURE BACKUP OPTIMIZATION OFF; # default
CONFIGURE DEFAULT DEVICE TYPE TO 'SBT_TAPE';
CONFIGURE CONTROLFILE AUTOBACKUP ON;
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE DISK TO '/backup/oraback/DPPRD01/rman_backups/%F';

CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE 'SBT_TAPE' TO '%F_%d';
CONFIGURE DEVICE TYPE DISK PARALLELISM 4 BACKUP TYPE TO COMPRESSED BACKUPSET;
CONFIGURE DEVICE TYPE 'SBT_TAPE' PARALLELISM 4 BACKUP TYPE TO BACKUPSET;
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE DISK TO 1; # default
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE SBT_TAPE TO 1; # default
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE DISK TO 1; # default
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE SBT_TAPE TO 1; # default
CONFIGURE CHANNEL DEVICE TYPE DISK FORMAT   '/backup/oraback/DPPRD01/rman_backups/bkp_df%t_s%s_s%p';

CONFIGURE CHANNEL DEVICE TYPE 'SBT_TAPE' PARMS  'ENV=(TDPO_OPTFILE=/u01/app/oracle/tdpoopt/tdpo.DPPRD01.opt)';

CONFIGURE MAXSETSIZE TO UNLIMITED; # default
CONFIGURE ENCRYPTION FOR DATABASE OFF; # default
CONFIGURE ENCRYPTION ALGORITHM 'AES128'; # default
CONFIGURE COMPRESSION ALGORITHM 'BASIC' AS OF RELEASE 'DEFAULT' OPTIMIZE FOR LOA
D TRUE ; # default
CONFIGURE ARCHIVELOG DELETION POLICY TO NONE; # default
CONFIGURE SNAPSHOT CONTROLFILE NAME TO '/backup/oraback/DPPRD01/rman_backups/sna
pcf_dpprd01.f';



/u01/app/oracle/tdpoopt

DPDEMO91 and DPDEV91



RMAN> show all;

RMAN configuration parameters for database with db_unique_name DPDEV91 are:
CONFIGURE RETENTION POLICY TO REDUNDANCY 5;
CONFIGURE BACKUP OPTIMIZATION OFF; # default
CONFIGURE DEFAULT DEVICE TYPE TO DISK; # default
CONFIGURE CONTROLFILE AUTOBACKUP ON;
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE DISK TO '/u10/oraback/DPDEV91/rman_backups/%F';
CONFIGURE DEVICE TYPE DISK PARALLELISM 4 BACKUP TYPE TO COMPRESSED BACKUPSET;
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE DISK TO 1; # default
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE DISK TO 1; # default
CONFIGURE CHANNEL DEVICE TYPE DISK FORMAT   '/u10/oraback/DPDEV91/rman_backups/bkp_df%t_s%s_s%p';
CONFIGURE MAXSETSIZE TO UNLIMITED; # default
CONFIGURE ENCRYPTION FOR DATABASE OFF; # default
CONFIGURE ENCRYPTION ALGORITHM 'AES128'; # default
CONFIGURE COMPRESSION ALGORITHM 'BASIC' AS OF RELEASE 'DEFAULT' OPTIMIZE FOR LOAD TRUE ; # default
CONFIGURE ARCHIVELOG DELETION POLICY TO NONE; # default
CONFIGURE SNAPSHOT CONTROLFILE NAME TO '/u10/oraback/DPDEV91/rman_backups/snapcf_DPDEV91.f';


CONFIGURE DEFAULT DEVICE TYPE TO 'SBT_TAPE';
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE 'SBT_TAPE' TO '%F_%d';
CONFIGURE DEVICE TYPE 'SBT_TAPE' PARALLELISM 4 BACKUP TYPE TO BACKUPSET;
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE SBT_TAPE TO 1; # default
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE SBT_TAPE TO 1; # default
CONFIGURE CHANNEL DEVICE TYPE 'SBT_TAPE' PARMS  'ENV=(TDPO_OPTFILE=/u01/app/oracle/tdpoopt/tdpo.DPDEV91.opt)';

rman

connect target /
run{
  allocate channel c1 type 'sbt_tape' parms 'ENV=(TDPO_OPTFILE=/u01/app/oracle/tdpoopt/tdpo.DPDEV91.opt)';
  release channel c1;
}




COLD_CMDFILE="full_noarchivelog_backup.rman"
COLDARC_CMDFILE="full_archivelog_cold_backup.rman"
HOT_CMDFILE="full_archivelog_backup.rman"

connect catalog DPDEV91/DPDEV91namr@RCATDEV

in dppev 
cd ${HOME}/aetna/scripts


cp -p backup_archlogs.ksh backup_archlogs.ksh.20150630

FORMAT 'arc_%d_%I_e%e_t%t_s%s_p%p'

# Backup RMAN Backup Directory To Tape
#echo "Running Script To Backup ${BKUDIR} To Tape at - "`date`
#echo
#${HOME}/aetna/scripts/backup_archive_logs.ksh ${DBName} ${BKUDIR}

/u01/app/oracle/aetna/scripts/backup_archlogs.ksh DPDEV91 rcatdev /u10/oraback/DPDEV91/rman_backups

in dppdev

cd ${BKPSCR}

view full_archivelog_backup.rman

cp -p full_archivelog_backup.rman full_archivelog_backup.rman.20150630
run
{
 # Update Heartbeat TimeStamp
 host '$HOME/aetna/scripts/heartbeat.ksh $ORACLE_SID';
 #
 BACKUP FILESPERSET 15 FORMAT '/u10/oraback/DPDEV91/rman_backups/bkp_%d_%I_t%t_s
%s_p%p' CHECK LOGICAL DATABASE PLUS ARCHIVELOG FORMAT '/u10/oraback/DPDEV91/rman
_backups/arc_%d_%I_e%e_t%t_s%s_p%p' DELETE INPUT;
 BACKUP FILESPERSET 20
 FORMAT '/u10/oraback/DPDEV91/rman_backups/arc_%d_%I_e%e_t%t_s%s_p%p'
 CHECK LOGICAL
 ARCHIVELOG ALL
 DELETE INPUT;
}

# Below added in support of Metalink Note 1348071.1
run
{
 sql 'ALTER SYSTEM ARCHIVE LOG CURRENT';
 BACKUP FILESPERSET 20
 FORMAT '/u10/oraback/DPDEV91/rman_backups/arc_%d_%I_e%e_t%t_s%s_p%p'
 CHECK LOGICAL
 ARCHIVELOG ALL
 DELETE INPUT;
}


in spnode45

view full_archivelog_backup.rman
run
{
 # Update Heartbeat TimeStamp
 host '$HOME/aetna/scripts/heartbeat.ksh $ORACLE_SID';
 #
 BACKUP FILESPERSET 15 FORMAT 'bkp_%d_%I_t%t_s%s_p%p' CHECK LOGICAL DATABASE PLUS ARCHIVELOG FORMAT 'arc_%d_%I_e%e_t%t_s%s_p%p' DELETE INPUT;

 BACKUP FILESPERSET 20
 FORMAT 'arc_%d_%I_e%e_t%t_s%s_p%p'
 CHECK LOGICAL
 ARCHIVELOG ALL
 DELETE INPUT;
}

# Below added in support of Metalink Note 1348071.1
run
{
 sql 'ALTER SYSTEM ARCHIVE LOG CURRENT';
 BACKUP FILESPERSET 20
 FORMAT 'arc_%d_%I_e%e_t%t_s%s_p%p'
 CHECK LOGICAL
 ARCHIVELOG ALL
 DELETE INPUT;
}


/u01/app/oracle/aetna/db_mgmt/backup/dbbackup_rman DPDEV91

cd $BKPSCR
savebkp.ksh DPDEV91 tdpTest

cd ${BKPSCR}

cp -p full_noarchivelog_backup.rman full_noarchivelog_backup.rman.20150630 
view full_noarchivelog_backup.rman
BACKUP FILESPERSET 15 FORMAT 'bkp_%d_%I_t%t_s%s_p%p' CHECK LOGICAL DATABASE;


RMAN configuration parameters for database with db_unique_name DPDEMO91 are:
CONFIGURE RETENTION POLICY TO REDUNDANCY 5;
CONFIGURE BACKUP OPTIMIZATION OFF; # default
CONFIGURE DEFAULT DEVICE TYPE TO DISK; # default
CONFIGURE CONTROLFILE AUTOBACKUP ON;
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE DISK TO '/u10/oraback/DPDEMO91/rman_backups/%F';
CONFIGURE DEVICE TYPE DISK PARALLELISM 4 BACKUP TYPE TO COMPRESSED BACKUPSET;
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE DISK TO 1; # default
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE DISK TO 1; # default
CONFIGURE CHANNEL DEVICE TYPE DISK FORMAT   '/u10/oraback/DPDEMO91/rman_backups/bkp_df%t_s%s_s%p';
CONFIGURE MAXSETSIZE TO UNLIMITED; # default
CONFIGURE ENCRYPTION FOR DATABASE OFF; # default
CONFIGURE ENCRYPTION ALGORITHM 'AES128'; # default
CONFIGURE COMPRESSION ALGORITHM 'BASIC' AS OF RELEASE 'DEFAULT' OPTIMIZE FOR LOAD TRUE ; # default
CONFIGURE ARCHIVELOG DELETION POLICY TO NONE; # default
CONFIGURE SNAPSHOT CONTROLFILE NAME TO '/u10/oraback/DPDEMO91/rman_backups/snapcf_DPDEMO91.f';

CONFIGURE DEFAULT DEVICE TYPE TO 'SBT_TAPE';
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE 'SBT_TAPE' TO '%F';
CONFIGURE DEVICE TYPE 'SBT_TAPE' PARALLELISM 4 BACKUP TYPE TO BACKUPSET;
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE SBT_TAPE TO 1; # default
CONFIGURE CHANNEL DEVICE TYPE 'SBT_TAPE' PARMS  'ENV=(TDPO_OPTFILE=/u01/app/oracle/tdpoopt/tdpo.DPDEMO91.opt)';

DPUAT91 and DRYDBAR





connect catalog DPDEVUG/DPDEVUGnamr@RCATDEV

RMAN> show all;

RMAN configuration parameters for database with db_unique_name DPDEVUG are:
CONFIGURE RETENTION POLICY TO RECOVERY WINDOW OF 8 DAYS;
CONFIGURE BACKUP OPTIMIZATION OFF; # default
CONFIGURE DEFAULT DEVICE TYPE TO 'SBT_TAPE';
CONFIGURE CONTROLFILE AUTOBACKUP ON;
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE DISK TO '/opt/u10/oraback/DPDEVUG/rman_backups/%F_%d';
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE 'SBT_TAPE' TO '%F_%d';
CONFIGURE DEVICE TYPE DISK PARALLELISM 4 BACKUP TYPE TO COMPRESSED BACKUPSET;
CONFIGURE DEVICE TYPE 'SBT_TAPE' PARALLELISM 4 BACKUP TYPE TO BACKUPSET;
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE DISK TO 1; # default
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE SBT_TAPE TO 1; # default
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE DISK TO 1; # default
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE SBT_TAPE TO 1; # default
CONFIGURE CHANNEL DEVICE TYPE DISK FORMAT   '/opt/u10/oraback/DPDEVUG/rman_backups/bkp_%d_%I_t%t_s%s_p%p';
CONFIGURE CHANNEL DEVICE TYPE 'SBT_TAPE' PARMS  'ENV=(TDPO_OPTFILE=/u01/app/oracle/tdpoopt/tdpo.DPDEVUG.opt)' FORMAT   'bkp_%d_%I_t%t_s%s_p%p';
CONFIGURE MAXSETSIZE TO UNLIMITED; # default
CONFIGURE ENCRYPTION FOR DATABASE OFF; # default
CONFIGURE ENCRYPTION ALGORITHM 'AES128'; # default
CONFIGURE COMPRESSION ALGORITHM 'BASIC' AS OF RELEASE 'DEFAULT' OPTIMIZE FOR LOAD TRUE ; # default
CONFIGURE ARCHIVELOG DELETION POLICY TO NONE; # default
CONFIGURE SNAPSHOT CONTROLFILE NAME TO '/opt/u10/oraback/DPDEVUG/rman_backups/snapcf_DPDEVUG.f';


CONFIGURE DEFAULT DEVICE TYPE TO 'SBT_TAPE';
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE 'SBT_TAPE' TO '%F';
CONFIGURE DEVICE TYPE 'SBT_TAPE' PARALLELISM 4 BACKUP TYPE TO BACKUPSET;
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE SBT_TAPE TO 1; # default
CONFIGURE CHANNEL DEVICE TYPE 'SBT_TAPE' PARMS  'ENV=(TDPO_OPTFILE=/u01/app/oracle/tdpoopt/tdpo.DPDEVUG.opt)';



run{
  allocate channel c1 type 'sbt_tape' parms 'ENV=(TDPO_OPTFILE=/u01/app/oracle/tdpoopt/tdpo.DPUAT91.opt)';
  release channel c1;
}


******************DPPQA***************



DPUAT91 and DRYDBAR


connect catalog DPUAT91/DPUAT91namr@RCATDEV

run{
  allocate channel c1 type 'sbt_tape' parms 'ENV=(TDPO_OPTFILE=/u01/app/oracle/tdpoopt/tdpo.DPUAT91.opt)';
  release channel c1;
}




/u01/app/oracle/aetna/db_mgmt/backup/dbbackup_rman DPUAT91


/u01/app/oracle/aetna/scripts/backup_archlogs.ksh DPUAT91 rcatdev /u10/oraback/DPUAT91/rman_backups

connect catalog DPUAT91/DPUAT91namr@RCATDEV

RMAN> show all;

RMAN configuration parameters for database with db_unique_name DPUAT91 are:
CONFIGURE RETENTION POLICY TO REDUNDANCY 3;
CONFIGURE BACKUP OPTIMIZATION OFF; # default
CONFIGURE DEFAULT DEVICE TYPE TO DISK; # default
CONFIGURE CONTROLFILE AUTOBACKUP ON;
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE DISK TO '/u10/oraback/DPUAT91/rman_backups/%F';
CONFIGURE DEVICE TYPE DISK PARALLELISM 4 BACKUP TYPE TO COMPRESSED BACKUPSET;
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE DISK TO 1; # default
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE DISK TO 1; # default
CONFIGURE CHANNEL DEVICE TYPE DISK FORMAT   '/u10/oraback/DPUAT91/rman_backups/bkp_df%t_s%s_s%p';
CONFIGURE MAXSETSIZE TO UNLIMITED; # default
CONFIGURE ENCRYPTION FOR DATABASE OFF; # default
CONFIGURE ENCRYPTION ALGORITHM 'AES128'; # default
CONFIGURE COMPRESSION ALGORITHM 'BASIC' AS OF RELEASE 'DEFAULT' OPTIMIZE FOR LOAD TRUE ; # default
CONFIGURE ARCHIVELOG DELETION POLICY TO NONE; # default
CONFIGURE SNAPSHOT CONTROLFILE NAME TO '/u10/oraback/DPUAT91/rman_backups/snapcf_dpuat90.f';



CONFIGURE DEFAULT DEVICE TYPE TO 'SBT_TAPE';
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE 'SBT_TAPE' TO '%F_%d';
CONFIGURE DEVICE TYPE 'SBT_TAPE' PARALLELISM 4 BACKUP TYPE TO BACKUPSET;
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE SBT_TAPE TO 1; # default
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE SBT_TAPE TO 1; # default
CONFIGURE CHANNEL DEVICE TYPE 'SBT_TAPE' PARMS  'ENV=(TDPO_OPTFILE=/u01/app/oracle/tdpoopt/tdpo.DPUAT91.opt)';
CONFIGURE SNAPSHOT CONTROLFILE NAME TO '/u10/oraback/DPUAT91/rman_backups/snapcf_dpuat91.f';



cd ${HOME}/aetna/scripts


cp -p backup_archlogs.ksh backup_archlogs.ksh.20150721

run
{
 sql 'ALTER SYSTEM ARCHIVE LOG CURRENT';
 BACKUP
 filesperset 20
 FORMAT 'arc_%d_%I_e%e_t%t_s%s_p%p'
 #FORMAT '${BKUDIR}/arc_%d_%I_e%e_t%t_s%s_p%p'
 #FORMAT '/u10/oraback/${DBName}/rman_backups/arc_%d_%I_e%e_t%t_s%s_p%p'
 ARCHIVELOG ALL
 DELETE INPUT;
}




cd /u01/app/oracle/aetna/db_mgmt/backup


COLD_CMDFILE="full_noarchivelog_backup.rman"
COLDARC_CMDFILE="full_archivelog_cold_backup.rman"
HOT_CMDFILE="full_archivelog_backup.rman"


cp -p full_archivelog_backup.rman full_archivelog_backup.rman.20150721


{
 # Update Heartbeat TimeStamp
 host '$HOME/aetna/scripts/heartbeat.ksh $ORACLE_SID';
 #
 BACKUP FILESPERSET 15 FORMAT 'bkp_%d_%I_t%t_s%s_p%p' CHECK LOGICAL DATABASE PLUS ARCHIVELOG FORMAT 'arc_%d_%I_e%e_t%t_s%s_p%p' DELETE INPUT;
 BACKUP FILESPERSET 20
 FORMAT 'arc_%d_%I_e%e_t%t_s%s_p%p'
 CHECK LOGICAL
 ARCHIVELOG ALL
 DELETE INPUT;
}
# Below added in support of Metalink Note 1348071.1
run
{
 sql 'ALTER SYSTEM ARCHIVE LOG CURRENT';
 BACKUP FILESPERSET 20
 FORMAT 'arc_%d_%I_e%e_t%t_s%s_p%p'
 CHECK LOGICAL
 ARCHIVELOG ALL
 DELETE INPUT;
}
exit;



run
{
 # Update Heartbeat TimeStamp
 host '$HOME/aetna/scripts/heartbeat.ksh $ORACLE_SID';
 #
 BACKUP FILESPERSET 15 FORMAT 'bkp_%d_%I_t%t_s%s_p%p' CHECK LOGICAL DATABASE PLU
S ARCHIVELOG FORMAT 'arc_%d_%I_e%e_t%t_s%s_p%p' DELETE INPUT;
 BACKUP FILESPERSET 20
 FORMAT 'arc_%d_%I_e%e_t%t_s%s_p%p'
 CHECK LOGICAL
 ARCHIVELOG ALL
 DELETE INPUT;
}
# Below added in support of Metalink Note 1348071.1
run
{
 sql 'ALTER SYSTEM ARCHIVE LOG CURRENT';
 BACKUP FILESPERSET 20
 FORMAT 'arc_%d_%I_e%e_t%t_s%s_p%p'
 CHECK LOGICAL
 ARCHIVELOG ALL
 DELETE INPUT;
}
exit;



cp -p full_noarchivelog_backup.rman full_noarchivelog_backup.rman.20150721

BACKUP FILESPERSET 15 FORMAT 'bkp_%d_%I_t%t_s%s_p%p' CHECK LOGICAL DATABASE;


connect catalog DRYDBAR/DRYDBARnamr@RCATDEV


starting full resync of recovery catalog
full resync complete
RMAN configuration parameters for database with db_unique_name DRYDBAR are:
CONFIGURE RETENTION POLICY TO REDUNDANCY 5;
CONFIGURE BACKUP OPTIMIZATION OFF;
CONFIGURE DEFAULT DEVICE TYPE TO DISK;
CONFIGURE CONTROLFILE AUTOBACKUP ON;
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE DISK TO '/u10/oraback/DR
YDBAR/rman_backups/%F_%d';
CONFIGURE DEVICE TYPE DISK PARALLELISM 4 BACKUP TYPE TO COMPRESSED BACKUPSET;
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE DISK TO 1;
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE DISK TO 1;
CONFIGURE CHANNEL DEVICE TYPE DISK FORMAT   '/u10/oraback/DRYDBAR/rman_backups/bkp_df%t_s%s_p%p';

CONFIGURE MAXSETSIZE TO UNLIMITED;
CONFIGURE ENCRYPTION FOR DATABASE OFF;
CONFIGURE ENCRYPTION ALGORITHM 'AES128';
CONFIGURE COMPRESSION ALGORITHM 'BASIC' AS OF RELEASE 'DEFAULT' OPTIMIZE FOR LOAD TRUE;

CONFIGURE ARCHIVELOG DELETION POLICY TO NONE;
CONFIGURE SNAPSHOT CONTROLFILE NAME TO '/u10/oraback/DRYDBAR/rman_backups/snapcf_DRYDBAR.f';


CONFIGURE DEFAULT DEVICE TYPE TO 'SBT_TAPE';
CONFIGURE CONTROLFILE AUTOBACKUP FORMAT FOR DEVICE TYPE 'SBT_TAPE' TO '%F_%d';
CONFIGURE DEVICE TYPE 'SBT_TAPE' PARALLELISM 4 BACKUP TYPE TO BACKUPSET;
CONFIGURE DATAFILE BACKUP COPIES FOR DEVICE TYPE SBT_TAPE TO 1; # default
CONFIGURE ARCHIVELOG BACKUP COPIES FOR DEVICE TYPE SBT_TAPE TO 1; # default
CONFIGURE CHANNEL DEVICE TYPE 'SBT_TAPE' PARMS  'ENV=(TDPO_OPTFILE=/u01/app/oracle/tdpoopt/tdpo.DRYDBAR.opt)';

