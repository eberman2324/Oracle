*********** SQLT hack SQL PROFILE ******

M21P server

3ccgxp7vqv3vy 	SYS_SQLPROF_017fd06932260003 3993827317

cd /home/oracle/eb/sqlt/utl/

sqlplus / as sysdba

@coe_xfr_sql_profile.sql



Execute coe_xfr_sql_profile_3ccgxp7vqv3vy_3993827317.sql
on TARGET system in order to create a custom SQL Profile
with plan 3993827317 linked to adjusted sql_text.

9j0tthkcykdqf - New SQL ID in m1P with different Method so (it has 	SYS_SQLPROF_0183210c0d850008)

vi coe_xfr_sql_profile_3ccgxp7vqv3vy_3993827317.sql

Change Medhod-8 to Medhod-4 

scp coe_xfr_sql_profile_3ccgxp7vqv3vy_3993827317.sql xhepydbm1p:/home/oracle/eb/sqlt/utl/coe_xfr_sql_profile_3ccgxp7vqv3vy_3993827317.sql

on m1p

cd /home/oracle/eb/sqlt/utl/

sqlplus / as sysdba

@coe_xfr_sql_profile_3ccgxp7vqv3vy_3993827317.sql





*************** HEPYPRD m1p ******
8ms2zu9q82x6j

cd /home/oracle/eb/sqlt/utl/

sqlplus / as sysdba

@coe_xfr_sql_profile.sql


*** HOW TO ENABLE SQL PROFILE for specific plan ****

If tunning advisor not providing any SQL PLAN.

Go back to snapshots that had good performance for particular query and found desire executinon plan.

You can use that plan to create SQL BASELINE

!! Last time per Oracle SR. We created SQL Profile with specific plan, however plan that was choosed had different number

But execution plans were the same. So Oracle said it expected.


2. Execute script sqlt/utl/coe_xfr_sql_profile.sql to obtain SQL Profile creation script.

Connect into SQL*Plus as user with access to data dictionary. Do not use SYS.

# cd sqlt/utl

SQL> START coe_xfr_sql_profile.sql gwsgr73pcr5k9 1056124571

3. Execute the resulting script to create SQL Profile in database where you want profile to be created.

4. Verify if the SQL Profile is created successfully.

SQL> select NAME,SQL_TEXT,LAST_MODIFIED,CREATED from dba_sql_profiles;

5. Verify if the SQL is using the SQL Profile that was just created.

SQL> <execute your SQL>

Obtain the execution plan of the previous SQL by executing below command in same session.

SQL> SELECT * FROM table(DBMS_XPLAN.DISPLAY_CURSOR(FORMAT=>'Advanced'));



***** HEPYQA3/HEPYPRD ****

1.	Purge the sql id from shared pool.
2.	Please create a SQL Plan Baseline in QA3 only with the PHV 336769394600( Execution plan available in prod)


Prabhat,

Since this SQL ID currently does not have SQL Baseline or SQL Profile in place in PROD. Please provide instructions to complete task below

1.	Purge the sql id from shared pool.
2.	Using coe_xfr_sql_profile.sql create sql profile in QA3 only (with PHV 532142024 available in Prod)
3.	Test.

In HEPYPRD 
SQL ID: g197vz85whmg5 
Plan:   532142024

1.	Purge the sql id in in QA3 shared pool.
2.	coe_xfr_sql_profile.sql  Run this in Prod (Provide the sql_id and PHV)
	cd $HOME/eb/sqlt/utl
        sqlplus / as sysdba
        @coe_xfr_sql_profile.sql 9myxytcbvk4tk 2632228965
3.	The above script will generate a profile defn script ----.sql file)
        scp coe_xfr_sql_profile_9myxytcbvk4tk_2632228965.sql xhepydbw22q:/home/oracle/eb/coe_xfr_sql_profile_9myxytcbvk4tk_2632228965.sql
4.	Run this ----.sql file in QA3. (It will generate a sql profile in QA3)
        Change to TRUE from FALSE before running script
        force_match => TRUE)
5.	Test



cd $HOME/eb/sqlt/utl
@coe_xfr_sql_profile.sql 9myxytcbvk4tk 2632228965

scp coe_xfr_sql_profile_04tg7jkfnp795_272570163.sql xhepydbw21s:/home/oracle/eb/coe_xfr_sql_profile_04tg7jkfnp795_272570163.sql





2400205912 bad
5696442 good

