. $SETUPENV DBATST

sqlplus / as sysdba

shutdown imeeidate;

startup

DDE: Problem Key 'ORA 1110' was flood controlled (0x1) (no incident)
ORA-01110: data file 8: '/u04/oracle/DBATST/dummy.dbf'
ORA-01157: cannot identify/lock data file 8 - see DBWR trace file
ORA-01110: data file 8: '/u04/oracle/DBATST/dummy.dbf'

select file_name, file_id from DBA_TEMP_FILES;
ORA-01157: cannot identif
ORA-01110

!! Somebody created dummy.dbf file then this file was deleted from file system
!! How to fix this issue


startup mount
alter database datafile '/u04/oracle/DBATST/dummy.dbf' offline drop;

alter database datafile '/u04/oracle/DBATST/dummy.dbf' offline drop;

alter database open;

!! Login to DB via DBArtidsan and noticed empty tablespace. Just drop it
DROP TABLESPACE DUMMYTS
 INCLUDING CONTENTS AND DATAFILES;


select file_name, file_id from DBA_TEMP_FILES;

+DATA1




!!! Tried to drop TEMP tablespace, 

but hitting following bug - SMON Blocking Drop Temporary Tablespace (Doc ID 1500044.1)

HEDWQA2 was switched over

Upon login to new Primary HEDWQA2 via DBArtisan noticed following errors


ORA-01157: cannot identify/lock data file 201 - see DBWR trace file
ORA-01110: data file 201: '+DATA_01

Also same errors produced by SELECT * FROM DBA_TEMP_FILES

Determinded that during Create StandBy or Switchover something happend to TEMP FILES.


How to fix the issue.

   CREATE TEMPORARY TABLESPACE TEMP_1
     TEMPFILE '+DATA1' SIZE 5G AUTOEXTEND OFF  
    EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M
/

ALTER DATABASE DEFAULT TEMPORARY TABLESPACE TEMP_1; 


Tried to drop TEMP tablespace, but hitting following bug - SMON Blocking Drop Temporary Tablespace (Doc ID 1500044.1)

Use Workaround

Bounce Database first

srvctl stop database -d HEPYMASK_xhepydbm01q

srvctl start database -d HEPYMASK_xhepydbm01q

Close ssh console

Start new ssh console

DROP TABLESPACE TEMP INCLUDING CONTENTS AND DATAFILES;
 

--Create TEMP again


 CREATE TEMPORARY TABLESPACE TEMP
     TEMPFILE '+DATA1' SIZE 2G AUTOEXTEND OFF  
    EXTENT MANAGEMENT LOCAL UNIFORM SIZE 1M
/


ALTER DATABASE DEFAULT TEMPORARY TABLESPACE TEMP;

--Drom TEMP_1
Use Workaround

Bounce Database first


srvctl stop database -d HEPYMASK_xhepydbm01q

srvctl start database -d HEPYMASK_xhepydbm01q

Close ssh console

Start new ssh console

DROP TABLESPACE TEMP_1 INCLUDING CONTENTS AND DATAFILES;
 



-- Increase TEMP tablespace size



alter tablespace TEMP add TEMPFILE '+DATA1' SIZE 24G;
